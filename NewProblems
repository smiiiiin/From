/*헤비 유저가 소유한 장소*/
WITH A AS (SELECT HOST_ID
FROM PLACES
GROUP BY HOST_ID
HAVING COUNT(ID)>1)

SELECT P.ID ID, P.NAME NAME, P.HOST_ID HOST_ID
FROM PLACES P, A
WHERE P.HOST_ID= A.HOST_ID
ORDER BY P.ID;

/*더 성능좋은 SQL*/
SELECT *
FROM PLACES PL1 
WHERE EXISTS (
                SELECT 1 /*BOOL인지 아닌지를 이렇게 SELECT 1로 표현가능 그리고 SELECT에 올 것을 그 느낌 그대로 WHERE로 가져갈 수 있다. */
                FROM PLACES PL2
                WHERE PL1.HOST_ID = PL2.HOST_ID            
                GROUP BY HOST_ID
                HAVING COUNT(*) > 1
             )
ORDER BY ID;


/*우유와 요거트가 담긴 (오답) 위에것 응용한건데 왜 안돼지?*/
SELECT DISTINCT(CART_ID)
FROM CART_PRODUCTS F
WHERE EXISTS (
    SELECT 1
    FROM CART_PRODUCTS S
    WHERE NAME LIKE "%Cereal%" AND F.CART_ID= S.CART_ID 
    GROUP BY CART_ID
    ORDER BY CART_ID
    
) AND NAME LIKE "%Yogurt%"
GROUP BY CART_ID
ORDER BY CART_ID;

/*우유와 요거트가 담긴 (내 답) */
WITH A AS (SELECT DISTINCT(CART_ID)
FROM CART_PRODUCTS
WHERE NAME LIKE "%Yogurt%")

SELECT DISTINCT(C.CART_ID)
FROM CART_PRODUCTS C,A
WHERE C.CART_ID=A.CART_ID AND NAME LIKE "%Milk%";

/*우유와 요거트가 담긴 (Better 답) */
SELECT P.CART_ID
FROM CART_PRODUCTS P
JOIN (SELECT CART_ID FROM CART_PRODUCTS WHERE NAME="Yogurt") YO
ON P.CART_ID=YO.CART_ID
WHERE NAME="Milk" 
ORDER BY P.CART_ID;
/*우유와 요거트가 담긴 (Better2 답) */
SELECT Y.CART_ID
FROM (SELECT CART_ID
FROM CART_PRODUCTS
WHERE NAME LIKE "Milk") M, CART_PRODUCTS Y
WHERE M.CART_ID= Y.CART_ID AND NAME LIKE "Yogurt"
ORDER BY CART_ID;




